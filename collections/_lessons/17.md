---
layout: lesson
title: Lekce 17
subtitle: Určování času vyžaduje práci
quote: "\"Drahý, drahý! Přijdu pozdě!\""
audio: /assets/audio/21lessons/3-17.m4a
image: /assets/images/bitcoin-whitepaper-timestamp-wide.png
order: ch3-17
---

Často se říká, že bitcoiny se těží tak, že tisíce počítačů pracují 
na řešení *velmi složitých* matematických problémů. Je třeba vyřešit 
určité úlohy, a pokud spočítáte správnou odpověď, "vyrobíte" bitcoin. 
Tento zjednodušený pohled na těžbu bitcoinů je sice možná srozumitelnější, 
ale poněkud se míjí s podstatou věci. Bitcoiny se nevyrábějí ani 
nevytvářejí a celé to utrpení ve skutečnosti není o řešení konkrétních 
matematických úloh. Ani ta matematika není nijak zvlášť složitá. Co je 
složité, je *určování času* v decentralizovaném systému.

Jak je uvedeno ve whitepaperu, systém proof-of-work (neboli těžba) je 
způsob, jak implementovat distribuovaný server časových razítek.

{% include image.html path="./assets/images/bitcoin-whitepaper-timestamp-wide.png" caption="Výňatky z whitepaperu. Říkal někdo timechain?" %}

Když jsem se poprvé seznamoval s tím, jak Bitcoin funguje, také jsem si 
myslel, že proof-of-work je neefektivní a nehospodárný. Po nějaké době 
jsem svůj [pohled na energetickou spotřebu Bitcoinu začal měnit][energy]. 
Zdá se, že proof-of-work je ještě dnes, v roce 13 AB (po Bitcoinu), 
široce nepochopen.

Vzhledem k tomu, že problémy, které je třeba vyřešit v rámci proof-of-work, 
jsou uměle vytvořeny, domnívá se mnoho lidí, že jde o *zbytečnou* práci. 
Pokud se soustředíme čistě na samotné výpočty, je to pochopitelný závěr. 
Bitcoin však není o výpočtech. Je o *nezávislém dohodnutí se na posloupnosti věcí.*

Proof-of-work je systém, ve kterém každý může potvrdit, co se událo a v jakém 
pořadí se to uskutečnilo. Toto nezávislé ověření vede ke konsensu, tedy 
vzájemné dohodě více stran, o tom, co kdo vlastní.

V radikálně decentralizovaném prostředí nedisponujeme luxusem absolutního 
času. Jakékoli hodiny by zavedly důvěryhodnou třetí stranu, centrální bod 
v systému, na který by bylo nutno spoléhat a který by mohl být napaden. 
"Čas je zásadním problémem," jak [upozorňuje][points out] Grisha Trubetskoy. A Satoshi 
tento problém geniálně vyřešil zavedením decentralizovaných hodin 
prostřednictvím proof-of-work blockchainu. Všichni se předem dohodnou, 
že chain s maximem kumulované práce je zdrojem pravdy. A to je z definice 
tím, co se skutečně stalo. Této dohodě se dnes říká Nakamotův konsensus.

> "Síť časově razítkuje transakce tím, že je hashuje do nepřetržitého řetězce, 
> který slouží jako důkaz posloupnosti událostí, jichž je svědkem."
> <cite>[Satoshi Nakamoto][whitepaper]</cite>

Bez konzistentního způsobu určování času nelze jednoznačně rozlišit, co 
bylo před a co bylo po. Spolehlivé uspořádání je nemožné. Jak bylo uvedeno 
výše, Nakamotův konsensus je způsob, jak Bitcoin konzistentně určuje čas. 
Motivační struktura systému vytváří probabilistické, decentralizované hodiny 
tím, že využívá jak chamtivosti, tak sobeckého zájmu konkurujících si účastníků. 
Skutečnost, že tyto hodiny jsou nepřesné, je irelevantní, protože pořadí 
událostí je nakonec jednoznačné a může je ověřit kdokoli.

Díky technologii proof-of-work je práce *i* její ověřování radikálně 
decentralizováno. Každý se může libovolně připojit i odejít a každý může 
kdykoli vše validovat. A nejen to, každý může ověřit stav systému *individuálně*, 
aniž by se při validaci musel spoléhat na někoho jiného.

Pochopení principu proof-of-work vyžaduje čas. Je často neintuitivní, a i když 
jsou pravidla jednoduchá, vedou k poměrně složitým jevům. Mně pomohla změna 
pohledu na těžbu. Užitečná, nikoliv zbytečná. Ověřování, a ne výpočty. 
Čas, ne bloky.

Bitcoin mě naučil, že určování času je ošemetné, zejména pokud se nacházíte 
v decentralizovaném prostředí.

---

{% include links.html lesson=17 %}

[points out]: https://grisha.org/blog/2018/01/23/explaining-proof-of-work/
[energy]: https://dergigi.com/2018/06/10/bitcoin-s-energy-consumption/
[whitepaper]: https://bitcoin.org/bitcoin.pdf

[pow-efficient]: https://blog.picks.co/pow-is-efficient-aa3d442754d3
[pow-anatomy]: https://bitcointechtalk.com/the-anatomy-of-proof-of-work-98c85b6f6667
[bw-mining]: https://en.bitcoin.it/wiki/Mining
[bw-supply]: https://en.bitcoin.it/wiki/Controlled_supply

<!-- Wikipedia -->
[alice]: https://en.wikipedia.org/wiki/Alice%27s_Adventures_in_Wonderland
[carroll]: https://en.wikipedia.org/wiki/Lewis_Carroll
